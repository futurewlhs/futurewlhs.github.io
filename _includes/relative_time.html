{% comment %}
Usage: {% include relative_time.html date=page.date %}
Outputs things like: "just now", "15 mins ago", "2 hours ago", "3 days ago", else a short date.
{% endcomment %}

{% assign now_ts = 'now' | date: '%s' | plus: 0 %}
{% assign dt_ts  = include.date | date: '%s' | plus: 0 %}
{% assign diff   = now_ts | minus: dt_ts %}

{% if diff < 60 %}
  just now
{% elsif diff < 3600 %}
  {% assign mins = diff | divided_by: 60 %}
  {{ mins }} min{% if mins != 1 %}s{% endif %} ago
{% elsif diff < 86400 %}
  {% assign hours = diff | divided_by: 3600 %}
  {{ hours }} hour{% if hours != 1 %}s{% endif %} ago
{% elsif diff < 2592000 %}
  {% assign days = diff | divided_by: 86400 %}
  {{ days }} day{% if days != 1 %}s{% endif %} ago
{% else %}
  {{ include.date | date: "%b %-d, %Y" }}
{% endif %}
